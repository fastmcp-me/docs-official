```python error_handling_example.py
def robust_agent_with_error_tracing():
    """Agent with comprehensive error handling and tracing"""
    
    tracer = trace_api.get_tracer(__name__)
    
    try:
        with tracer.start_as_current_span("robust_agent_execution") as span:
            span.set_attribute("agent.version", "1.0")
            
            # Your agent logic here
            result = app.invoke({
                "messages": [{"role": "user", "content": "Test message"}],
                "current_step": "start"
            })
            
            span.set_attribute("execution.status", "success")
            return result
            
    except Exception as e:
        # Create an error span
        with tracer.start_as_current_span("agent_error") as error_span:
            error_span.set_attribute("error.type", type(e).__name__)
            error_span.set_attribute("error.message", str(e))
            error_span.set_attribute("execution.status", "error")
            
        raise e
```

