```typescript TypeScript
import { getLogger, GalileoCallback } from "galileo";

// Get the logger from the current Galileo context
const logger = getLogger();

const isInExperiment = logger.currentParent() !== undefined;

// Create the callback checking to see if we are in an experiment
// If we are, set startNewTrace and flushOnChainEnd to false
// so that the existing trace is used, and not flushed
const galileoCallback = new GalileoCallback(
    logger,          // galileoLogger
    !isInExperiment, // startNewTrace
    !isInExperiment, // flushOnChainEnd
);
const callbacks = [galileoCallback];
```